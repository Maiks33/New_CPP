#include <iostream>
#include <cstring>
#include <fstream>
#include <cstdio>
#define u_int unsigned int
 
using namespace std;

struct Car
{
	string carmodel;
	string manufacturer;
	u_int productionyear;
	u_int mileage;
	u_int price;
};
 
void SetCars(char* filename, u_int N)
{
	FILE* fout;
	fout = fopen(filename, "w");
	if (fout == 0) {
		cout << filename << ": can't be opened\n";
		exit(-1);
	}
	Car tmpC;
	cout <<"Car Model\tProduction Year\tMileage\tManufacturer\tPrice\t\n";
	
	for (int i = 1; i<=N; i++)
	{
		cin>>tmpC.carmodel>>tmpC.productionyear>>tmpC.mileage>>tmpC.manufacturer>>tmpC.price;
		fprintf(fout, "%s\t%u\t%u\t%s\t%u\n", tmpC.carmodel, tmpC.productionyear, tmpC.mileage, tmpC.manufacturer, tmpC.price);
	}
	fclose(fout);
}

void ShowCars(char* filename, u_int N)
{
	FILE* fin;
	fin = fopen(filename, "r");
	if (fin == 0) {
		cout << filename << ": can't be opened\n";
		exit(-1);
	}
	u_int k=0;
	Car tmpC;
	cout <<"Car Model\tProduction Year\tMileage\tManufacturer\tPrice\t\n";
 	while(fscanf(fin,"%s\t%u\t%u\t%s\t%u\n", tmpC.carmodel, &tmpC.productionyear, &tmpC.mileage, tmpC.manufacturer, &tmpC.price) != EOF)
		if(!(N==k)){
			fprintf(stdout,"%s\t%u\t%u\t%s\t%u\n", tmpC.carmodel, tmpC.productionyear, tmpC.mileage, tmpC.manufacturer, tmpC.price);
			k++;	
		}
	fclose(fin);
}
 
int main(int argc, char** argv)
{
	if ((!strcmp(argv[1],"--help")) || (!strcmp(argv[1],"-h"))){
		cout<< "You can choose 2 startup options: "<<endl;
		cout<< "-с launch of the program in the mode of creating electronic tables"<<endl;
		cout<< "-r launch of the program in the content reading mode text file"<<endl;
		cout<< "Also you must specify the number [N] of entries and the [file_name]"<<endl;
		cout<< "Final view of the program launch structure -с [N] [file_name] or -r [N] [file_name]"<<endl;
		return 0;
	}

	u_int N = atoi(argv[2]);
	
	if ((!strcmp(argv[1],"-c")))
		SetCars(argv[3], N);

	if ((!strcmp(argv[1],"-r")))
		ShowCars(argv[3], N);

	return 0;
}
