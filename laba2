#include <iostream>
#include <cstring>
#include <fstream>
#include <cstdio>
#define u_int unsigned int
 
using namespace std;

struct Car
{
	string carmodel;
	string manufacturer;
	u_int productionyear;
	u_int mileage;
	u_int price;
};
 
void SetCars(u_int N, char* filename)
{
	FILE* fout;
	fout = fopen(filename, "w");
	if (fout == 0) {
		cout << filename << ": can't be opened\n";
		exit(-1);
	}
	Car tmpC;
	cout <<"Car Model\t"<<"Production Year\t"<<"Mileage\t"<<"Manufacturer\t"<<"Price\t\n";
	fprintf(fout, "Car Model\tProduction Year\tMileage\tManufacturer\tPrice\t\n");
	for (int i = 0; i<N; i++)
	{
		cin>>tmpC.carmodel;
		cin>>tmpC.productionyear;
		cin>>tmpC.mileage;
		cin>>tmpC.manufacturer;
		cin>>tmpC.price;
		fprintf(fout, "%s\t%s\t%u\t%u\t%u\n", tmpC.carmodel, tmpC.productionyear, tmpC.mileage, tmpC.manufacturer, tmpC.price);
	}
}

void ShowCars(u_int N, char* filename)
{
	FILE* fin;
	fin = fopen(filename, "r");
	if (fin == 0) {
		cout << filename << ": can't be opened\n";
		exit(-1);
	}
	int k=0;
	Car tmpC;
	cout <<"Car Model\t"<<"Production Year\t"<<"Mileage\t"<<"Manufacturer\t"<<"Price\t\n";
	fprintf(fin, "Car Model\tProduction Year\tMileage\tManufacturer\tPrice\t\n");
 	while(fscanf(fin,"%s\t%s\t%u\t%u\t%u\n", tmpC.carmodel, tmpC.productionyear, &tmpC.mileage, &tmpC.manufacturer, &tmpC.price) != EOF)
		if(!(N==k)){
			k++;
			fprintf(fin, "%s\t%s\t%u\t%u\t%u\n", tmpC.carmodel, tmpC.productionyear, tmpC.mileage, tmpC.manufacturer, tmpC.price);
		}
}
 
int main(int argc, char** argv)
{
	if ((!strcmp(argv[1],"--help")) || (!strcmp(argv[1],"-h"))){
		cout<< "You can choose 2 startup options: "<<endl;
		cout<< "-с launch of the program in the mode of creating electronic tables"<<endl;
		cout<< "-r launch of the program in the content reading mode text file"<<endl;
		cout<< "Also you must specify the number [N] of entries and the [file_name]"<<endl;
		cout<< "Final view of the program launch structure -с [N] [file_name] or -r [N] [file_name]"<<endl;
		return 0;
	}

	u_int N = atoi(argv[2]);
	
	if ((!strcmp(argv[1],"-с")))
		SetCars(N,argv[3]);

	if ((!strcmp(argv[1],"-r")))
		ShowCars(N,argv[3]);

	return 0;
}
